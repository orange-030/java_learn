# å®¹å™¨åŒ–ğŸ³



## Docketå’ŒK8Sçš„åŒºåˆ«





# *docker*ğŸ³

Docker æ˜¯ä¸€ä¸ªåŸºäº Go è¯­è¨€çš„å¼€æºçš„åº”ç”¨å®¹å™¨å¼•æ“ï¼ŒDocker å¯ä»¥è®©å¼€å‘è€…æ‰“åŒ…ä»–ä»¬çš„åº”ç”¨ä»¥åŠä¾èµ–åŒ…åˆ°ä¸€ä¸ªè½»é‡çº§ã€å¯ç§»æ¤çš„å®¹å™¨ä¸­ï¼Œ ç„¶åå‘å¸ƒåˆ°ä»»ä½•æµè¡Œçš„ Linux æœºå™¨ä¸Šï¼Œä¹Ÿå¯ä»¥å®ç°è™šæ‹ŸåŒ–ã€‚

å®¹å™¨æ˜¯å®Œå…¨ä½¿ç”¨æ²™ç®±æœºåˆ¶ï¼Œç›¸äº’ä¹‹é—´ä¸ä¼šæœ‰ä»»ä½•æ¥å£ï¼Œæ›´é‡è¦çš„æ˜¯å®¹å™¨æ€§èƒ½å¼€é”€æä½ã€‚

Docker æ”¯æŒå°†è½¯ä»¶ç¼–è¯‘æˆä¸€ä¸ªé•œåƒï¼Œç„¶ååœ¨é•œåƒä¸­å„ç§è½¯ä»¶åšå¥½é…ç½®ï¼Œå°†é•œåƒå‘å¸ƒå‡ºå»ï¼Œå…¶ä»–ä½¿ç”¨è€…å¯ä»¥ç›´æ¥ä½¿ç”¨è¿™ä¸ªé•œåƒã€‚ è¿è¡Œä¸­çš„è¿™ä¸ªé•œåƒè¢«ç§°ä¸ºå®¹å™¨ã€‚



## å‚è€ƒæ–‡æ¡£

ğŸ‘‰ [Docker å®˜æ–¹æ–‡æ¡£](https://docs.docker.com/)

ğŸ‘‰ [ä¸­æ–‡æ–‡æ¡£  A](https://docker-doc.readthedocs.io/zh_CN/latest/installation/ubuntulinux.html)

ğŸ‘‰ [ä¸­æ–‡æ–‡æ¡£  B](http://www.dockerinfo.net/document)



## æ ¸å¿ƒæ¦‚å¿µ

- docker é•œåƒï¼ˆImagesï¼‰ï¼šDocker é•œåƒæ˜¯ç”¨äºåˆ›å»º Docker å®¹å™¨çš„æ¨¡æ¿ã€‚ 

- docker å®¹å™¨ï¼ˆContainerï¼‰ï¼šå®¹å™¨æ˜¯ç‹¬ç«‹è¿è¡Œçš„ä¸€ä¸ªæˆ–ä¸€ç»„åº”ç”¨ã€‚ 

- docker å®¢æˆ·ç«¯ï¼ˆClientï¼‰ï¼šå®¢æˆ·ç«¯é€šè¿‡å‘½ä»¤è¡Œæˆ–è€…å…¶ä»–å·¥å…·ä½¿ç”¨

- docker ä¸»æœºï¼ˆHostï¼‰ï¼šä¸€ä¸ªç‰©ç†æˆ–è€…è™šæ‹Ÿçš„æœºå™¨ç”¨äºæ‰§è¡Œ Docker å®ˆæŠ¤è¿›ç¨‹å’Œå®¹å™¨ã€‚ 

- dockerä»“åº“ï¼ˆRegistryï¼‰ï¼šDocker ä»“åº“ç”¨æ¥ä¿å­˜é•œåƒï¼Œå¯ä»¥ç†è§£ ä¸ºä»£ç æ§åˆ¶ä¸­çš„ä»£ç ä»“åº“ã€‚

  [Docker Hub](https://hub.docker.com) æä¾›äº†åºå¤§çš„é•œåƒé›†åˆä¾›ä½¿ç”¨



## é•œåƒåŠ é€Ÿ

Perference -> Docker Engine

```json
{
  "experimental": false,
  "features": {
    "buildkit": true
  },
  "registry-mirrors": [
    "https://vmpi2mrp.mirror.aliyuncs.com"
  ]
}
```







# dockerå‘½ä»¤ğŸ³

## é•œåƒæ“ä½œ

### æœç´¢é•œåƒ

```
docker search [image]
```



- OFFICIALï¼šæ˜¯å¦ä¸ºå®˜æ–¹å‘å¸ƒçš„é•œåƒ
- AUTOMATEDï¼šæ˜¯å¦ä¸ºè‡ªåŠ¨æ„å»º

![image-20201222092118073](http://store.secretcamp.cn/uPic/image-2020122209211807320201222092118160860007879B7i879B7i8.png)





### ä¸‹è½½é•œåƒ

å¦‚æœä¸åŠ  tag åˆ™é»˜è®¤ä¸‹è½½ latest

```dockerfile
docker pull [image:tag]
```



### æŸ¥çœ‹é•œåƒ

```
docker images
```





### åˆ é™¤é•œåƒ

```
docker rmi
```





## å®¹å™¨æ“ä½œ

### è¿è¡Œå®¹å™¨

```dockerfile
docker run [OPTIONS] image [COMMAND] [ARG...]

docker run --name mynginx -d nginx:latest  # ä½¿ç”¨é•œåƒnginx:latestä»¥åå°æ¨¡å¼å¯åŠ¨ä¸€ä¸ªå®¹å™¨ï¼Œå‘½åä¸ºmynginx



å‚æ•°åˆ—è¡¨ï¼š
  -d åå°è¿è¡Œ
  -p [localhostPort:containerPort] ç«¯å£æ˜ å°„ 
  -P éšæœºç«¯å£æ˜ å°„ï¼Œå®¹å™¨å†…éƒ¨ç«¯å£éšæœºæ˜ å°„åˆ°ä¸»æœºçš„ç«¯å£
  -v [æœ¬åœ°ç›®å½•:å®¹å™¨ç›®å½•] æŠŠä¸€ä¸ªå®¿ä¸»æœºä¸Šçš„ç›®å½•æŒ‚è½½åˆ°é•œåƒé‡Œ
  --link æ·»åŠ é“¾æ¥åˆ°å¦ä¸€ä¸ªå®¹å™¨
  --restart æŒ‡å®šåœ¨å®¹å™¨é€€å‡ºæ—¶ï¼Œæ˜¯å¦é‡å¯å®¹å™¨ã€‚å®¹å™¨å¹³å°åˆ›å»ºçš„æ‰€æœ‰å®¹å™¨é€€å‡ºæ—¶ï¼Œéƒ½ä¼šé‡å¯å®¹å™¨ï¼Œæ‰€ä»¥æœ¬å‚æ•°ä¸éœ€è¦ç‰¹åˆ«æŒ‡å®š
  --privileged ä½¿ç”¨è¯¥å‚æ•°ï¼Œcontainerå†…çš„rootæ‹¥æœ‰çœŸæ­£çš„rootæƒé™
```







```
docker start [CONTAINER ID]
```



### åœæ­¢å®¹å™¨

```
docker stop [CONTAINER ID]
```



### æŸ¥çœ‹æ­£åœ¨è¿è¡Œçš„å®¹å™¨

```sh
docker ps [OPTIONS]


å‚æ•°åˆ—è¡¨ï¼š
  -a æ˜¾ç¤ºæ‰€æœ‰å®¹å™¨ï¼ŒåŒ…æ‹¬æœªè¿è¡Œçš„
  -s æ˜¾ç¤ºæ€»çš„æ–‡ä»¶å¤§å°
```



### åˆ é™¤å®¹å™¨

```sh
docker rm
```





### è¿›å…¥å®¹å™¨

```sh
docker attach [OPTIONS] CONTAINER
```







# *kubernetes*ğŸ³
